<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="site.title">Cidad√£o.AI ‚Äî Documenta√ß√£o T√©cnica Backend</title>
    
    <!-- Meta Tags -->
    <meta name="description" content="Documenta√ß√£o t√©cnica completa do backend Cidad√£o.AI - Sistema multi-agente de IA para transpar√™ncia p√∫blica">
    <meta name="keywords" content="Cidad√£o.AI, transpar√™ncia p√∫blica, IA √©tica, open government, ODS 16, backend, FastAPI">
    <meta name="author" content="Anderson Henrique">
    
    <!-- Fonts - Optimized for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/main.css">
    <!-- OfflineAccordion - Sistema Completo (funciona sem servidor) -->
    <link rel="stylesheet" href="assets/css/super-accordion.css">
    <!-- GitHub Pages Config -->
    <script src=".github-pages-config.js"></script>
    <script src="src/utils/OfflineAccordion.js" defer></script>
</head>
<body>
    <!-- Navega√ß√£o Principal -->
    <nav class="navbar" role="navigation" aria-label="Navega√ß√£o principal">
        <div class="navbar-container">
            <!-- Logo -->
            <a href="#" class="logo" aria-label="Cidad√£o.AI - P√°gina inicial">
                <div class="logo-icon">üèõÔ∏è</div>
                <span class="logo-text">Cidad√£o.AI</span>
            </a>
            
            <!-- Controles -->
            <div class="nav-controls">
                <!-- Progresso de Leitura (s√≥ no modo leitura) -->
                <div class="reading-progress-indicator" id="readingProgressIndicator" style="display: none;">
                    <span class="reading-progress-text" id="readingProgressText">0% lido</span>
                </div>
                
                <!-- Toggle Sidebar (s√≥ no modo leitura mobile) -->
                <button class="control-button reading-sidebar-toggle" id="readingSidebarToggle" style="display: none;" data-i18n="reading.toggle-sidebar" aria-label="Mostrar/esconder √≠ndice">
                    ‚ò∞
                </button>
                
                <!-- Tema -->
                <div class="control-group" role="group" aria-label="Seletor de tema">
                    <button class="control-button" data-theme-btn="light" data-i18n="nav.theme.light" aria-label="Tema claro">
                        ‚òÄÔ∏è Claro
                    </button>
                    <button class="control-button" data-theme-btn="dark" data-i18n="nav.theme.dark" aria-label="Tema escuro">
                        üåô Escuro
                    </button>
                </div>
                
                <!-- Idioma -->
                <div class="control-group" role="group" aria-label="Seletor de idioma">
                    <button class="control-button" data-lang-btn="pt-BR" data-reading-lang-btn="pt-BR" data-i18n="nav.lang.pt" aria-label="Portugu√™s">
                        üáßüá∑ PT
                    </button>
                    <button class="control-button" data-lang-btn="en-US" data-reading-lang-btn="en-US" data-i18n="nav.lang.en" aria-label="English">
                        üá∫üá∏ EN
                    </button>
                </div>
                
                <!-- Bot√£o Voltar (s√≥ no modo leitura) -->
                <button class="control-button reading-back-to-main-header" id="readingBackToMainHeader" style="display: none;" data-i18n="reading.back-to-main" aria-label="Voltar √† p√°gina principal">
                    ‚Üê Voltar
                </button>
                
                <!-- Bot√£o Fechar Modo Leitura (s√≥ no modo leitura) -->
                <button class="control-button reading-close-button" id="readingCloseButton" data-modal-close="readingModal" style="display: none;" data-i18n="reading.close" aria-label="Fechar modo leitura">
                    ‚úï Fechar
                </button>
            </div>
        </div>
    </nav>

    <!-- Conte√∫do Principal -->
    <main role="main">
        <!-- Hero Section -->
        <section class="hero" aria-labelledby="hero-title">
            <div class="hero-container">
                <div class="hero-badge" data-i18n="hero.badge">
                    üáßüá∑ Documenta√ß√£o T√©cnica Backend
                </div>
                
                <h1 id="hero-title" class="hero-title" data-i18n="hero.title">
                    Cidad√£o.AI Backend
                </h1>
                
            </div>
        </section>

        <!-- Documenta√ß√£o T√©cnica Accordion -->
        <section id="technical-sections" class="section" aria-labelledby="sections-title">
            <div class="section-container">
                <h2 id="sections-title" class="section-title" data-i18n="section.technical.title">
                    Documenta√ß√£o T√©cnica
                </h2>

                <!-- Controles Globais -->
                <div class="accordion-controls">
                    <div class="controls-left">
                        <button class="control-btn expand-all" data-i18n="controls.expand-all">
                            üìñ Expandir Todas
                        </button>
                        <button class="control-btn collapse-all" data-i18n="controls.collapse-all">
                            üìï Recolher Todas
                        </button>
                        <button class="control-btn reading-mode" id="readingModeBtn" data-i18n="controls.reading-mode">
                            üìö Modo Leitura
                        </button>
                        <button class="control-btn print-btn" id="printBtn" data-i18n="controls.print">
                            üñ®Ô∏è Imprimir
                        </button>
                    </div>
                    <div class="controls-right">
                        <div class="search-box">
                            <input type="text" id="searchInput" placeholder="üîç Buscar na documenta√ß√£o..." data-i18n-placeholder="search.placeholder">
                            <button class="search-clear" id="searchClear">‚úï</button>
                        </div>
                    </div>
                </div>

                <!-- SUPER ACCORDION CONTAINER -->
                <div id="documentationAccordion">
                    <!-- SuperAccordion ser√° renderizado aqui -->
                </div> <!-- fim documentation-accordion -->
            </div>
        </section>
    </main>

    <!-- Modal: Sobre -->
    <div id="aboutModal" class="modal" role="dialog" aria-labelledby="about-modal-title" aria-hidden="true">
        <div class="modal-content" style="max-width: 900px; width: 90vw;">
            <div class="modal-header">
                <h2 id="about-modal-title" class="modal-title" data-i18n="modal.about.title">
                    Sobre o Cidad√£o.AI Backend
                </h2>
                <button class="modal-close" data-modal-close="aboutModal" aria-label="Fechar modal">
                    √ó
                </button>
            </div>
            <div class="modal-body">
                <div class="about-intro mb-6">
                    <p><strong>Cidad√£o.AI</strong> √© um projeto de pesquisa, software livre e engajamento c√≠vico, idealizado e desenvolvido por Anderson Henrique da Silva, como Trabalho de Conclus√£o de Curso (TCC), sob a orienta√ß√£o da Profa. Dra. Aracele Garcia de Oliveira Fassbinder, no Instituto Federal do Sul de Minas Gerais ‚Äì Campus Muzambinho.</p>
                    <p class="mt-4">Este sistema multi-agente foi concebido com o prop√≥sito de democratizar o acesso aos dados p√∫blicos brasileiros, unindo √©tica, tecnologia e cidadania.</p>
                </div>
                
                <div class="author-section mb-6">
                    <h3 class="mb-4">üë®‚Äçüíª Autor</h3>
                    <div class="author-profile" style="display: flex; gap: 2rem; align-items: center;">
                        <img src="assets/img/author.png" alt="Anderson Henrique da Silva" class="author-photo" loading="lazy" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover;">
                        <div class="author-info">
                            <p><strong>Anderson Henrique da Silva</strong></p>
                            <p class="text-secondary">Bacharelando em Ci√™ncia da Computa√ß√£o | Engenheiro de Sistemas de IA</p>
                            <div class="author-links mt-3">
                                <a href="https://github.com/anderson-ufrj" target="_blank" rel="noopener">üîó GitHub</a>
                                <a href="https://huggingface.co/neural-thinker" target="_blank" rel="noopener">üîó Hugging Face</a>
                                <a href="https://www.linkedin.com/in/anderson-henrique/" target="_blank" rel="noopener">üîó LinkedIn</a>
                                <a href="mailto:andersonhs27@gmail.com">üìß andersonhs27@gmail.com</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="supervision-section mb-6">
                    <h3 class="mb-4">üß† Orienta√ß√£o Acad√™mica</h3>
                    <p><strong>Profa. Dra. Aracele Garcia de Oliveira Fassbinder</strong></p>
                    <p class="text-secondary">üìç Instituto Federal do Sul de Minas Gerais ‚Äì Campus Muzambinho</p>
                    <p class="mt-2"><a href="http://lattes.cnpq.br/" target="_blank" rel="noopener">üîó Curr√≠culo Lattes</a></p>
                </div>
                
                <div class="tech-section mb-6">
                    <h3 class="mb-3">üß∞ Tecnologias Utilizadas</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li><strong>Backend API:</strong> Python, FastAPI, LangChain, ChromaDB, FAISS, BERTimbau</li>
                        <li><strong>Banco de Dados:</strong> MongoDB</li>
                        <li><strong>Frontend:</strong> Next.js 15, React 18, TypeScript, Tailwind CSS, Zustand</li>
                        <li><strong>API Documentation:</strong> Swagger UI, ReDoc (autom√°tico)</li>
                        <li><strong>Deploy:</strong> Vercel (Frontend), Hugging Face Spaces (Backend API)</li>
                        <li><strong>Internacionaliza√ß√£o:</strong> next-intl (Portugu√™s/Ingl√™s)</li>
                    </ul>
                </div>
                
                <div class="licenses-section mb-6">
                    <h3 class="mb-3">üîê Licen√ßas e Direitos</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li>‚Ä¢ C√≥digo-fonte licenciado sob Apache License 2.0.</li>
                        <li>‚Ä¢ Todos os modelos e bibliotecas de terceiros respeitam suas respectivas licen√ßas.</li>
                        <li>‚Ä¢ Os dados p√∫blicos utilizados seguem a Lei de Acesso √† Informa√ß√£o (Lei n¬∫ 12.527/2011).</li>
                    </ul>
                </div>
                
                <div class="institutional-section mb-6">
                    <h3 class="mb-3">üèõÔ∏è Apoio Institucional</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li>‚Ä¢ Instituto Federal de Educa√ß√£o, Ci√™ncia e Tecnologia do Sul de Minas Gerais</li>
                        <li>‚Ä¢ Curso de Bacharelado em Ci√™ncia da Computa√ß√£o</li>
                        <li>‚Ä¢ Projeto vinculado √† Agenda 2030 ‚Äì ODS 16: Paz, Justi√ßa e Institui√ß√µes Eficazes</li>
                        <li>‚Ä¢ Alinhado √†s diretrizes da Parceria para Governo Aberto (Open Government Partnership ‚Äì OGP)</li>
                    </ul>
                </div>
                
                <div class="research-section mb-6">
                    <h3 class="mb-3">üìö Notas de Pesquisa do Autor</h3>
                    <p><strong>Anderson Henrique da Silva - Notas de Pesquisa Completas</strong></p>
                    <p class="text-secondary">Documenta√ß√£o detalhada do processo de pesquisa, metodologia e descobertas durante o desenvolvimento do projeto.</p>
                    <p class="mt-3">
                        <a href="https://cidadao-ai-frontend.vercel.app/Notas-de-Pesquisa.pdf" target="_blank" rel="noopener" class="btn btn-primary">
                            üìÑ Visualizar PDF
                        </a>
                    </p>
                </div>
                
                <div class="official-links-section">
                    <h3 class="mb-3">üåê Links Oficiais</h3>
                    <div class="link-card" style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 0.5rem; margin-top: 1rem;">
                        <h4>üìö Hub de Documenta√ß√£o Oficial</h4>
                        <p><a href="https://anderson-ufrj.github.io/cidadao.ai-docs/" target="_blank" rel="noopener">anderson-ufrj.github.io/cidadao.ai-docs/</a></p>
                        <p class="text-secondary mt-2">Documenta√ß√£o completa do projeto, guias de uso, arquitetura e API.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Arquitetura -->
    <div id="architectureModal" class="modal" role="dialog" aria-labelledby="architecture-modal-title" aria-hidden="true">
        <div class="modal-content" style="max-width: 1200px; width: 95vw;">
            <div class="modal-header">
                <h2 id="architecture-modal-title" class="modal-title" data-i18n="modal.architecture.title">
                    Arquitetura do Sistema
                </h2>
                <button class="modal-close" data-modal-close="architectureModal" aria-label="Fechar modal">
                    √ó
                </button>
            </div>
            <div class="modal-body">
                <p class="mb-6" data-i18n="modal.architecture.content">
                    O Cidad√£o.AI Backend implementa uma arquitetura enterprise-grade com sistema multi-agente, API REST com 40+ endpoints, e infraestrutura containerizada para an√°lise de transpar√™ncia governamental brasileira.
                </p>
                
                <div class="architecture-overview mb-6">
                    <h3 class="mb-4">üèóÔ∏è Componentes Principais</h3>
                    <div class="tech-grid">
                        <div class="tech-item">
                            <strong>API Layer:</strong> FastAPI com 40+ endpoints documentados
                        </div>
                        <div class="tech-item">
                            <strong>Multi-Agent System:</strong> 15 agentes especializados
                        </div>
                        <div class="tech-item">
                            <strong>Data Layer:</strong> PostgreSQL + Redis + ChromaDB
                        </div>
                        <div class="tech-item">
                            <strong>Security:</strong> JWT + OAuth2 + Rate Limiting
                        </div>
                    </div>
                </div>

                <div class="agents-overview">
                    <h3 class="mb-4">ü§ñ Agentes Especializados</h3>
                    <ul class="agents-list">
                        <li>‚Ä¢ <strong>Abaporu:</strong> N√∫cleo central da IA</li>
                        <li>‚Ä¢ <strong>Zumbi:</strong> Investigador de padr√µes</li>
                        <li>‚Ä¢ <strong>Anita Garibaldi:</strong> Roteadora sem√¢ntica</li>
                        <li>‚Ä¢ <strong>Tiradentes:</strong> Avaliador de riscos</li>
                        <li>‚Ä¢ <strong>Nan√£:</strong> Agente temporal</li>
                        <li>‚Ä¢ <strong>Jos√© Bonif√°cio:</strong> Pol√≠ticas p√∫blicas</li>
                        <li>‚Ä¢ <strong>Dandara:</strong> Justi√ßa social</li>
                        <li>‚Ä¢ <strong>Machado de Assis:</strong> An√°lise textual</li>
                        <li>‚Ä¢ <strong>Obaluai√™:</strong> Detector de corrup√ß√£o</li>
                        <li>‚Ä¢ <strong>Niemeyer:</strong> Visualiza√ß√£o gr√°fica</li>
                        <li>‚Ä¢ <strong>Lampi√£o:</strong> Executor t√©cnico ETL</li>
                        <li>‚Ä¢ <strong>Ceuci:</strong> Agente preditivo</li>
                        <li>‚Ä¢ <strong>Carlos Drummond:</strong> Comunicador do povo</li>
                        <li>‚Ä¢ <strong>Maria Quit√©ria:</strong> Guardi√£ da integridade</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Modo de Leitura -->
    <div id="readingModal" class="modal reading-modal" role="dialog" aria-labelledby="reading-modal-title" aria-hidden="true">
        <div class="reading-modal-content">
            <!-- Barra de Progresso do Modo Leitura -->
            <div class="reading-progress-bar" id="readingProgressBar">
                <div class="reading-progress-fill" id="readingProgress"></div>
            </div>
            
            <!-- Conte√∫do do Modal de Leitura -->
            <div class="reading-modal-body" id="readingModalBody">
                <div class="reading-content" id="readingContent">
                    <!-- Conte√∫do ser√° inserido dinamicamente aqui -->
                </div>
            </div>
            
            <!-- Navega√ß√£o Lateral -->
            <nav class="reading-sidebar" id="readingSidebar">
                <h3 class="reading-sidebar-title" data-i18n="reading.index">üìë √çndice</h3>
                <div class="reading-nav-list" id="readingNavList">
                    <!-- Links de navega√ß√£o ser√£o inseridos aqui -->
                </div>
            </nav>
            
            <!-- Bot√£o Voltar ao Topo -->
            <button class="reading-back-to-top" id="backToTopBtn" data-i18n="reading.back-to-top" aria-label="Voltar ao topo">
                ‚Üë
            </button>
        </div>
    </div>

    <!-- Bot√£o Flutuante de Informa√ß√µes -->
    <button class="floating-button" data-modal-open="aboutModal" aria-label="Informa√ß√µes sobre o projeto" title="Sobre o Cidad√£o.AI Backend">
        ‚ÑπÔ∏è
    </button>

    <!-- Scripts -->
    <script src="assets/js/main.js"></script>
    <!-- Lazy Loader removed for cleaner production build -->
    <script>
        // Accordion Debug Helper
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Cidad√£o.AI Documentation ready!');
            
            // Debug: Check accordion state after initialization
            setTimeout(() => {
                const categories = document.querySelectorAll('.accordion-category');
                const items = document.querySelectorAll('.accordion-item');
                
                console.log(`üìä Accordion Debug Info:`);
                console.log(`- Categories found: ${categories.length}`);
                console.log(`- Items found: ${items.length}`);
                
                // Check if toggles have click handlers
                const categoryToggles = document.querySelectorAll('.category-toggle');
                const itemToggles = document.querySelectorAll('.item-toggle');
                
                console.log(`- Category toggles: ${categoryToggles.length}`);
                console.log(`- Item toggles: ${itemToggles.length}`);
                
                // Force initial state
                categories.forEach(cat => {
                    const toggle = cat.querySelector('.category-toggle');
                    const content = cat.querySelector('.category-content');
                    if (toggle && content) {
                        // Ensure initial collapsed state
                        toggle.setAttribute('aria-expanded', 'false');
                        content.classList.remove('expanded');
                    }
                });
                
                items.forEach(item => {
                    const toggle = item.querySelector('.item-toggle');
                    const content = item.querySelector('.item-content');
                    if (toggle && content) {
                        // Ensure initial collapsed state
                        toggle.setAttribute('aria-expanded', 'false');
                        content.classList.remove('expanded');
                    }
                });
                
                console.log('‚úÖ Accordion initial state set');
            }, 500);
        });
    </script>
    
    <!-- Sistema simplificado - OfflineAccordion only -->
    

    <!-- SUPER ACCORDION SYSTEM -->
    <script>
        // Inicializa√ß√£o do SuperAccordion
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üöÄ Inicializando SuperAccordion...');
            
            try {
                // Criar inst√¢ncia do OfflineAccordion
                window.offlineAccordion = new OfflineAccordion({
                    containerSelector: '#documentationAccordion',
                    contentPath: 'content/',
                    searchMinLength: 2,
                    debounceDelay: 300,
                    lazyLoadOffset: 100,
                    cacheExpiry: 5 * 60 * 1000, // 5 minutos
                    animationDuration: 300,
                    readingModeWidth: '800px'
                });
                
                // Inicializar sistema
                await window.offlineAccordion.init();
                
                console.log('‚úÖ OfflineAccordion inicializado com sucesso!');
                
                // Os controles s√£o gerenciados internamente pelo OfflineAccordion
                
                // Expor m√©todos para debug (apenas em desenvolvimento)
                if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                    window.debugAccordion = () => window.offlineAccordion.getDebugInfo();
                    console.log('üîß Debug: use window.debugAccordion() para informa√ß√µes');
                }
                
            } catch (error) {
                console.error('‚ùå Erro ao inicializar OfflineAccordion:', error);
                
                // Fallback b√°sico
                const container = document.querySelector('#documentationAccordion');
                if (container) {
                    container.innerHTML = `
                        <div style="padding: 2rem; text-align: center; color: #dc2626; background: #fee; border: 1px solid #f56565; border-radius: 8px; margin: 1rem;">
                            <h3>‚ùå Erro no Sistema de Documenta√ß√£o</h3>
                            <p><strong>Erro:</strong> ${error.message}</p>
                            <p>Verifique o console para mais detalhes.</p>
                            <button onclick="location.reload()" style="background: #dc2626; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.25rem; cursor: pointer;">
                                üîÑ Recarregar P√°gina
                            </button>
                        </div>
                    `;
                }
            }
        });
        
        // Event listeners para integra√ß√£o com controles do header
        document.addEventListener('DOMContentLoaded', function() {
            // Sincronizar com mudan√ßas de tema
            const themeBtns = document.querySelectorAll('[data-theme-btn]');
            themeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // O OfflineAccordion detecta automaticamente mudan√ßas via MutationObserver
                    console.log('üé® Tema alterado - OfflineAccordion sincronizar√° automaticamente');
                });
            });
            
            // Sincronizar com mudan√ßas de idioma
            const langBtns = document.querySelectorAll('[data-lang-btn]');
            langBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // O OfflineAccordion detecta automaticamente mudan√ßas via MutationObserver
                    console.log('üåê Idioma alterado - OfflineAccordion sincronizar√° automaticamente');
                });
            });
        });
    </script>

</body>
</html>